<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=1024">
    <title>Claire De Lune</title>
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./Design.css">
  </head>
<body>
  <div class="aurora"></div>
  <canvas id="sky"></canvas>
  <div id="intro" class="fade-in">The stars unite to tell you something</div>
  <div id="message">✨ Click anywhere to reveal the stars... ✨</div>
  
  <!--Backround music here -->
  <audio id="bg-music" loop>
    <source src="./myaudio.mp3" type="audio/mp3">
  </audio>


  <script>
    const intro = document.getElementById("intro");
   const message = document.getElementById("message")
    const canvas = document.getElementById("sky");
    const ctx = canvas.getContext("2d");
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

setTimeout(() => {
    intro.classList.add("fade-out");

    setTimeout(() => {
      intro.style.display = "none";
      message.style.display = "block";
      intro.style.animation = "fadeIn 2s ease-in forwards"
      message.style.animation = "fadeIn 2s ease-in forwards" // show canvas
    }, 2000); // wait for fade out animation
  }, 4000);
 
// star positioning to i refers to num of stars 
   let stars = [];
for (let i = 0; i < 100; i++) {
  stars.push({
    x: Math.random() * canvas.width,
    y: Math.random() * canvas.height,
    r: Math.random() * 1 + 1 // 1-2px and size ng star  
  });
}

// Animate twinkling stars
function drawStars() {
  ctx.clearRect(0, 0, canvas.width, canvas.height); // clear canvas
  stars.forEach(star => {
    ctx.beginPath();
    ctx.arc(star.x, star.y, star.r, 0, Math.PI * 2);
    ctx.fillStyle = "white";
    ctx.globalAlpha = 0.5 + Math.random() * 0.5; // flick rate ng stars 
    ctx.fill();
  });
  
  
}

drawStars();

    // kung paano naka scale based on window size 
    const scale = 30; 
    const offsetX = canvas.width * 0.1;
    const offsetY = canvas.height * 0.25;

    // Letters coordinate para sa constellation 
    const phraseStars = [
      // W
      [{x:0,y:0},{x:0,y:1},{x:0.33,y:1},{x:0.5,y:0.5},{x:0.67,y:1},{x:1,y:1},{x:1,y:0}],
      // I
     [{x:0.5,y:0},{x:0.5,y:1}],
      // L
      [{x:0,y:0},{x:0,y:1},{x:0.8,y:1}],
      // L
      [{x:0,y:0},{x:0,y:1},{x:0.8,y:1}],
      [], // space
      // Y
      [{x:0,y:0},{x:0.5,y:0.5},{x:1,y:0},{x:0.5,y:0.5},{x:0.5,y:1}],
      // O
      [{x:0,y:0},{x:1,y:0},{x:1,y:1},{x:0,y:1},{x:0,y:0}],
      // U
      [{x:0,y:0},{x:0,y:1},{x:1,y:1},{x:1,y:0}],
      [], // space
      // B
       [{x:0,y:0},{x:0,y:1},{x:0.6,y:1},{x:0.8,y:0.8},{x:0.6,y:0.6},{x:0,y:0.6},{x:0.6,y:0.6},{x:0.8,y:0.4},{x:0.6,y:0.2},{x:0,y:0} ], 
      // E
     [{x:1,y:0},{x:0,y:0},{x:0,y:1},{x:1,y:1},{x:0,y:0.5},{x:0.7,y:0.5}],
      [], // space
      // M
      [{x:0,y:1},{x:0,y:0},{x:0.5,y:0.5},{x:1,y:0},{x:1,y:1}],
      // Y
      [{x:0,y:0},{x:0.5,y:0.5},{x:1,y:0},{x:0.5,y:0.5},{x:0.5,y:1}],
      [], // space
      // A
      [{x:0,y:1},{x:0.5,y:0},{x:1,y:1},{x:0.2,y:0.5},{x:0.8,y:0.5}],
      // C
      [{x:1,y:0},{x:0,y:0},{x:0,y:1},{x:1,y:1}],
      // Q
      [{x:0,y:0},{x:1,y:0},{x:1,y:1},{x:0,y:1},{x:0,y:0},{x:0.6,y:0.4},{x:1.3,y:-0.3}],
      // U
      [{x:0,y:0},{x:0,y:1},{x:1,y:1},{x:1,y:0}],
      // A
      [{x:0,y:1},{x:0.5,y:0},{x:1,y:1},{x:0.2,y:0.5},{x:0.8,y:0.5}],
      // I
      [{x:0.5,y:0},{x:0.5,y:1}],
      // N
      [{x:0,y:1},{x:0,y:0},{x:1,y:1},{x:1,y:0}],
      // T
      [{x:0,y:0},{x:1,y:0},{x:0.5,y:0},{x:0.5,y:1}],
      // A
      [{x:0,y:1},{x:0.5,y:0},{x:1,y:1},{x:0.2,y:0.5},{x:0.8,y:0.5}],
      // N
      [{x:0,y:1},{x:0,y:0},{x:1,y:1},{x:1,y:0}],
      // C
      [{x:1,y:0},{x:0,y:0},{x:0,y:1},{x:1,y:1}],
      // E
      [{x:1,y:0},{x:0,y:0},{x:0,y:1},{x:1,y:1},{x:0,y:0.5},{x:0.7,y:0.5}],
      [], // space
    ];

    // mga stars na involved dun sa constellation 
    let constellationStars = [];
    let words = [];
    let cursorX = 0, cursorY = 0;

    let currentWord = [];
    phraseStars.forEach((letter, idx) => {
      if (letter.length === 0) {
        if (currentWord.length > 0) {
          words.push(currentWord);
          currentWord = [];
        }
        cursorX += 1.5;
        return;
      }
      letter.forEach(pt => {
        currentWord.push({
          x: offsetX + (cursorX + pt.x) * scale,
          y: offsetY + (cursorY + pt.y) * scale,
        });
      });
      cursorX += 2;
      // second line pag d kasya sa screen 
      if (idx === 13) {
        words.push(currentWord);
        currentWord = [];
        cursorX = 0;
        cursorY = 3;
      }
    });
    if (currentWord.length > 0) words.push(currentWord);

    let wordIndex = 0;
    let starIndex = 0;
    let drawing = false;

    function drawStar(star, highlight=false) {
      ctx.beginPath();
      ctx.arc(star.x, star.y, highlight ? 3.5 : 2, 0, Math.PI * 2);
      ctx.fillStyle = "lightblue";
      ctx.shadowBlur = highlight ? 15 : 5;
      ctx.shadowColor = "lightblue";
      ctx.globalAlpha = 1;
      ctx.fill();
    }

    function animateConstellation() {
      if (wordIndex < words.length) {
        let word = words[wordIndex];
        if (starIndex < word.length) {
          let star = word[starIndex];
          drawStar(star, true);

          if (starIndex > 0) {
            let prev = word[starIndex - 1];
            ctx.beginPath();
            ctx.moveTo(prev.x, prev.y);
            ctx.lineTo(star.x, star.y);
            ctx.strokeStyle = "rgba(173,216,230,0.8)";
            ctx.lineWidth = 1.5;
            ctx.shadowBlur = 10;
            ctx.shadowColor = "lightblue";
            ctx.stroke();
          }
          starIndex++;
          setTimeout(animateConstellation, 250);
        } else {
          // Move to next word
          starIndex = 0;
          wordIndex++;
          setTimeout(animateConstellation, 500);
        }
      } else {
        document.getElementById("constellation-text").style.display = "block";
        document.querySelector(".buttons").style.display = "block";
      }
    }

   canvas.addEventListener("click", () => {
  if (!drawing) {
    drawing = true;
    document.getElementById("message").style.display = "none";

    // piano bg pag nag click 
    const music = document.getElementById("bg-music");
    music.volume = 0.5; // volume control lang to
    music.play().catch(err => {
      console.log("Audio playback failed:", err);
    });

    animateConstellation();
  }
});
  </script>
</body>
</html>